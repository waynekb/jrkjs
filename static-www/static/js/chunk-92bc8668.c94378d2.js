(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-92bc8668","chunk-79f1ccc5"],{"0900":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-cascader",{ref:"elcascader",class:["card",e.data&&e.data.length?"active":"inactive"],attrs:{props:e.props,"show-all-levels":!0,placeholder:e.data&&(e.multiple?e.data.map((function(t){return t[e.labelName]})).join(" "):e.data[e.labelName])||e.placeholder||"未选中任何节点",clearable:"",disabled:e.disabled},on:{change:e.handleItemChange},model:{value:e.staticValue,callback:function(t){e.staticValue=t},expression:"staticValue"}})},i=[],l=(n("7f7f"),n("5df3"),n("1c4c"),{name:"CascaderSelector",model:{prop:"data",event:"change"},props:{defaultSelectFirst:{type:Boolean,default:!1},data:{type:[Array,Object],default:null},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:null},valueName:{type:String,default:"value"},labelName:{type:String,default:"label"},multiple:{type:Boolean,default:!1},childGetterMethod:{type:Function,default:function(){return function(){}}},place:{type:String,default:null}},data:function(){var e=this;return{staticValue:[],props:{getChild:function(t){return e.childGetterMethod(t)},lazy:!0,checkStrictly:!0,multiple:this.multiple,lazyLoad:function(e,t){e.root&&(e.value="root"),this.getChild(e.value).then((function(e){var n=e.list,a=Array.from(n).map((function(e){return{value:e.code+"",label:e.name,leaf:!1}}));t(a)}))}}}},methods:{dblClick:function(e){console.log(e)},handleItemChange:function(e){var t=this,n=this.valueName,a=this.labelName,i=this.multiple;this.$nextTick((function(){var e=t.$refs.elcascader.getCheckedNodes(),l=e.map((function(e){var t={};return t[n]=e.value,t[a]=e.label,t})),o=i?l:l[0];t.$emit("change",o);var r=o&&(i?o.map((function(e){return e[a]})):o[a]);t.$emit("update:place",r)}))}}}),o=l,r=(n("d6fa"),n("2877")),c=Object(r["a"])(o,a,i,!1,null,"db60b6ba",null);t["default"]=c.exports},"3f6b1":function(e,t,n){},"74fd":function(e,t,n){},"951b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("span",[e._v("权限编辑")]),e._v(" "),n("el-tooltip",{attrs:{effect:"light",content:e.name}},[n("span",{staticStyle:{color:"#c33"}},[e._v(e._s(e.title)+" "+e._s(e.value.title))])]),e._v(" "),n("div",{staticClass:"card-item"},[n("CompaniesSelector",{on:{change:e.hasChange},model:{value:e.companies,callback:function(t){e.companies=t},expression:"companies"}})],1),e._v(" "),n("div",{staticClass:"card-item"},[n("div",{staticStyle:{"margin-bottom":"1rem"}},[e._v("当前已有权限的作用范围:"+e._s(e.companies.length)+"条")]),e._v(" "),e._l(e.companies,(function(t,a){return n("CompanyFormItem",{key:a,staticStyle:{margin:"0.5rem"},attrs:{data:e.companies[a]},on:{"update:data":function(t){return e.$set(e.companies,a,t)}},model:{value:t.code,callback:function(n){e.$set(t,"code",n)},expression:"i.code"}},[e._v(e._s(t.code))])}))],2),e._v(" "),n("el-card",{staticClass:"card-item"},[n("el-button",{staticStyle:{width:"10rem"},attrs:{type:"success"},on:{click:function(t){return e.$emit("require-update")}}},[e._v("保存")]),e._v(" "),n("el-button",{staticStyle:{width:"10rem",float:"right"},attrs:{type:"info"},on:{click:function(t){return e.$emit("require-close")}}},[e._v("取消")])],1)],1)},i=[],l=n("abce"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.inner_id||e.data&&e.data.code?n("el-popover",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{placement:"right",trigger:"hover"},on:{show:function(t){e.canLoad=!0}},scopedSlots:e._u([{key:"reference",fn:function(){return[e.form?n("el-tag",[e._v(e._s(e.form.name))]):n("span",[n("el-tooltip",{attrs:{content:e.errorMsg}},[n("span",[e._v(e._s(e.inner_id)+"无效")])])],1)]},proxy:!0}],null,!1,296447458)},[n("Company",{attrs:{loading:e.loading,"error-msg":e.errorMsg,data:e.form,"can-load":e.canLoad},on:{"update:loading":function(t){e.loading=t},"update:errorMsg":function(t){e.errorMsg=t},"update:error-msg":function(t){e.errorMsg=t},"update:data":function(t){e.form=t},formUpdate:e.handleChange},model:{value:e.inner_id,callback:function(t){e.inner_id=t},expression:"inner_id"}})],1):e._e()},r=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],style:{width:e.width}},[n("el-form-item",{attrs:{label:"代码"}},[e._v(e._s(e.innerInfo.code))]),e._v(" "),n("el-form-item",{attrs:{label:"名称"}},[e._v(e._s(e.innerInfo.name))]),e._v(" "),n("el-form-item",{attrs:{label:"类别"}},[e._v(e._s(e.innerInfo.type))]),e._v(" "),n("el-form-item",{attrs:{label:"管理成员"}},[0==e.innerInfo.managers.length?n("div",[e._v("无管理")]):1==e.innerInfo.managers.length?n("div",[n("el-link",{attrs:{icon:"el-icon-s-custom",target:"#/user/profile?id="+e.innerInfo.managers[0].id}},[e._v(e._s(e.innerInfo.managers[0].realName))])],1):n("el-dropdown",[n("span",{staticClass:"el-dropdown-link"},[n("el-link",{attrs:{icon:"el-icon-s-custom",target:"#/user/profile?id="+e.innerInfo.managers[0].id}},[e._v(e._s(e.innerInfo.managers[0].realName))]),e._v("\n        等"+e._s(e.innerInfo.managers.length)+"人\n        "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})],1),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.innerInfo.managers,(function(t){return n("el-dropdown-item",{key:t.id,attrs:{icon:"el-icon-s-custom"}},[n("el-link",{attrs:{icon:"el-icon-s-custom",target:"#/user/profile?id="+t.id}},[e._v(e._s(t.realName))])],1)})),1)],1)],1)],1)},s=[],d=n("fcac"),u={name:"Company",model:{prop:"id",event:"change"},props:{data:{type:Object,default:function(){return this.defaultData()}},id:{type:String,default:null},width:{type:String,default:"200px"},canLoad:{type:Boolean,default:!1}},data:function(){return{loading:!1,innerInfo:this.defaultData(),loaded:!1,lastId:null}},watch:{id:{handler:function(e){this.loaded=!1,this.OnStatusChange()},immediate:!0},canLoad:{handler:function(e){this.OnStatusChange()},immediate:!0},data:{handler:function(e){if(e){var t=this.defaultData();for(var n in this.innerInfo)e[n]?this.innerInfo[n]=e[n]:this.innerInfo[n]=t[n]}},deep:!0,immediate:!0}},methods:{OnStatusChange:function(){var e=this,t=this.id;if(t){var n=this.canLoad;n&&this.lastId!==t&&(this.loading=!0,this.lastId=t,Object(d["b"])(t).then((function(t){var n=t.model;e.$emit("update:data",n),e.$emit("formUpdate",n),e.loaded=!0})).finally((function(){e.loading=!1})))}else{var a=this.data;if(a)return;this.$emit("update:data",null)}},defaultData:function(){return{name:"无名称",type:"无类别",code:"未知代码",managers:[]}}}},m=u,f=n("2877"),p=Object(f["a"])(m,c,s,!1,null,null,null),h=p.exports,v={name:"CompanyFormItem",components:{Company:h},model:{prop:"id",event:"change"},props:{data:{type:Object,default:function(){return{realName:"null"}}},id:{type:String,default:null}},data:function(){return{form:null,canLoad:!1,inner_id:null,errorMsg:null,loading:!1}},watch:{data:{handler:function(e){this.form=e},immediate:!0},id:{handler:function(e){e&&(this.canLoad=!0),this.inner_id=e},immediate:!0}},methods:{handleChange:function(){this.$emit("update:data",this.form),this.$emit("change",this.inner_id)}}},g=v,_=Object(f["a"])(g,o,r,!1,null,null,null),y=_.exports,b={name:"PermissionModify",components:{CompaniesSelector:l["default"],CompanyFormItem:y},model:{prop:"value",event:"change"},props:{title:{type:String,default:null},name:{type:String,default:null},value:{type:Object,default:null}},data:function(){return{companies:[]}},watch:{value:{handler:function(e){var t=e.permissions;this.companies=t&&t.map((function(e){return{code:e}}))||[]},immediate:!0}},methods:{hasChange:function(){var e=this;this.$nextTick((function(){var t=e.value;t.permissions=e.companies.map((function(e){return e.code}))}))}}},S=b,C=(n("aa29"),Object(f["a"])(S,a,i,!1,null,"088a5b3b",null));t["default"]=C.exports},aa29:function(e,t,n){"use strict";n("74fd")},abce:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("CascaderSelector",{ref:"companyInnerSelector",attrs:{"default-select-first":e.defaultSelectFirst,"child-getter-method":e.companyChild,multiple:!0,placeholder:e.placeholder},model:{value:e.companySelectItem,callback:function(t){e.companySelectItem=t},expression:"companySelectItem"}})},i=[],l=(n("7f7f"),n("0900")),o=n("fcac"),r=n("ed08"),c={name:"CompaniesSelector",components:{CascaderSelector:l["default"]},model:{prop:"companies",event:"change"},props:{defaultSelectFirst:{type:Boolean,default:!1},companies:{type:Array,default:null}},data:function(){return{companySelectItem:null,showPlaceholder:"未选择"}},computed:{requireCheckName:function(){var e=this;return Object(r["b"])((function(){e.checkName()}),500)},placeholder:function(){var e=this.companies&&this.companies.filter((function(e){return e})).map((function(e){return e.name})).join(",");return e||this.showPlaceholder}},watch:{companySelectItem:{handler:function(e){var t=e.map((function(e){return{code:e.value,name:e.label}}));this.$emit("change",t)}},immediate:!0,deep:!0},methods:{companyChild:o["a"],checkName:function(){this.companies,this.placeholder}}},s=c,d=n("2877"),u=Object(d["a"])(s,a,i,!1,null,null,null);t["default"]=u.exports},d6fa:function(e,t,n){"use strict";n("3f6b1")}}]);