(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55a07519","chunk-172cd786","chunk-3a471b04","chunk-79f1ccc5"],{"0900":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-cascader",{ref:"elcascader",class:["card",e.data&&e.data.length?"active":"inactive"],attrs:{props:e.props,"show-all-levels":!0,placeholder:e.data&&(e.multiple?e.data.map((function(t){return t[e.labelName]})).join(" "):e.data[e.labelName])||e.placeholder||"未选中任何节点",clearable:"",disabled:e.disabled},on:{change:e.handleItemChange},model:{value:e.staticValue,callback:function(t){e.staticValue=t},expression:"staticValue"}})},r=[],i=(n("7f7f"),n("5df3"),n("1c4c"),{name:"CascaderSelector",model:{prop:"data",event:"change"},props:{defaultSelectFirst:{type:Boolean,default:!1},data:{type:[Array,Object],default:null},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:null},valueName:{type:String,default:"value"},labelName:{type:String,default:"label"},multiple:{type:Boolean,default:!1},childGetterMethod:{type:Function,default:function(){return function(){}}},place:{type:String,default:null}},data:function(){var e=this;return{staticValue:[],props:{getChild:function(t){return e.childGetterMethod(t)},lazy:!0,checkStrictly:!0,multiple:this.multiple,lazyLoad:function(e,t){e.root&&(e.value="root"),this.getChild(e.value).then((function(e){var n=e.list,a=Array.from(n).map((function(e){return{value:e.code+"",label:e.name,leaf:!1}}));t(a)}))}}}},methods:{dblClick:function(e){console.log(e)},handleItemChange:function(e){var t=this,n=this.valueName,a=this.labelName,r=this.multiple;this.$nextTick((function(){var e=t.$refs.elcascader.getCheckedNodes(),i=e.map((function(e){var t={};return t[n]=e.value,t[a]=e.label,t})),c=r?i:i[0];t.$emit("change",c);var l=c&&(r?c.map((function(e){return e[a]})):c[a]);t.$emit("update:place",l)}))}}}),c=i,l=(n("d6fa"),n("2877")),o=Object(l["a"])(c,a,r,!1,null,"db60b6ba",null);t["default"]=o.exports},3036:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("CascaderSelector",{ref:"companyInnerSelector",attrs:{"child-getter-method":e.companyChild,placeholder:e.value.name||e.placeholder},on:{change:e.updateItem},model:{value:e.companySelectItem,callback:function(t){e.companySelectItem=t},expression:"companySelectItem"}})},r=[],i=n("0900"),c=n("fcac"),l=n("ed08"),o={name:"CompanySelector",components:{CascaderSelector:i["default"]},model:{prop:"data",event:"change"},props:{data:{type:Object,default:null},placeholder:{type:String,default:null},code:{type:String,default:null}},data:function(){return{companySelectItem:null,value:{}}},computed:{requireCheckName:function(){var e=this;return Object(l["b"])((function(){e.checkName()}),500)}},watch:{code:{handler:function(e){this.handleDataChange({code:e})},immediate:!0},data:{handler:function(e){this.handleDataChange(e)},deep:!0,immediate:!0}},methods:{companyChild:c["a"],handleDataChange:function(e){var t=this;e&&e.code?Object(c["b"])(e.code).then((function(e){t.value=e.model})):this.value={}},updateItem:function(e){var t={};e&&(t.code=e.value,t.name=e.label),this.$emit("change",t),this.$emit("update:data",t),this.$emit("update:code",t.code)},checkName:function(){this.data,this.placeholder}}},u=o,s=n("2877"),d=Object(s["a"])(u,a,r,!1,null,null,null);t["default"]=d.exports},"3f6b1":function(e,t,n){},"636e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.innerForm?n("div",[n("el-form-item",{staticStyle:{width:"25.2rem"},attrs:{prop:"company",label:"管理单位"}},[n("CompanySelector",{attrs:{placeholder:e.innerForm.company&&e.innerForm.company.name||"仅当前登录的用户的单位可见"},model:{value:e.innerForm.company,callback:function(t){e.$set(e.innerForm,"company",t)},expression:"innerForm.company"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"duties",label:"职务"}},[n("el-tooltip",{attrs:{content:"需选用下拉框中的建议",placement:"right"}},[n("DutiesSelector",{staticClass:"inline-input",attrs:{placeholder:"请输入并选中职务名称"},model:{value:e.innerForm.duties,callback:function(t){e.$set(e.innerForm,"duties",t)},expression:"innerForm.duties"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{prop:"title",label:"职务等级"}},[n("el-tooltip",{attrs:{content:"需选用下拉框中的建议",placement:"right"}},[n("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"14rem"},attrs:{"fetch-suggestions":e.companyTitleQuery,placeholder:"请输入并选中职务等级"},model:{value:e.innerForm.title.name,callback:function(t){e.$set(e.innerForm.title,"name",t)},expression:"innerForm.title.name"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{prop:"titleDate",label:"等级时间"}},[n("el-date-picker",{staticStyle:{width:"14rem"},attrs:{placeholder:"职务等级生效时间",format:"yyyy年MM月dd日","value-format":"yyyy-MM-dd"},model:{value:e.innerForm.titleDate,callback:function(t){e.$set(e.innerForm,"titleDate",t)},expression:"innerForm.titleDate"}})],1)],1):e._e()},r=[],i=(n("7f7f"),n("96cf"),n("1da1")),c=n("3036"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tooltip",{attrs:{content:e.onlyTag?"从下拉框中选取类别":"先选中类别后，再选中职务"}},[n("span",[n("el-select",{staticStyle:{width:"8rem"},attrs:{"remote-method":e.tagFilter,filterable:"",clearable:"","default-first-option":"",remote:"",placeholder:"选择类别"},on:{change:e.tagChange},model:{value:e.iTag,callback:function(t){e.iTag=t},expression:"iTag"}},e._l(e.tags,(function(e,t){return n("el-option",{key:t,attrs:{value:e,label:e}})})),1),e._v(" "),e.onlyTag?e._e():n("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"12rem"},attrs:{"fetch-suggestions":e.dutiesQuery,placeholder:e.dutiesIsObj?e.duties.name:e.duties?e.duties.map((function(e){return e.name})).join(" "):"搜索并选择职务"},on:{select:e.handleDutiesSelect},model:{value:e.iDuties,callback:function(t){e.iDuties=t},expression:"iDuties"}})],1)])},o=[],u=(n("6b54"),n("fcac")),s={name:"DutiesSelector",model:{prop:"duties",event:"change"},props:{onlyTag:{type:Boolean,default:!1},tag:{type:String,default:null},duties:{type:[Array,Object],default:null}},data:function(){return{iDuties:null,iTag:null,tags:[]}},computed:{dutiesIsObj:function(){var e=this.duties;return!!e&&"[object Object]"===Object.prototype.toString.call(e)}},watch:{tag:{handler:function(e){this.iTag=e},immediate:!0}},mounted:function(){this.tagFilter()},methods:{tagChange:function(e){this.iTag=e,this.$emit("update:tag",e),this.$emit("tagChange",e),this.iDuties=null},tagFilter:function(e){var t=this;Object(u["e"])(e).then((function(e){t.tags=e.list,t.iDuties=null}))},dutiesQuery:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["d"])(t,this.iTag);case 2:return a=e.sent,e.next=5,this.queryItem(a,n);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),queryItem:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.list,r=a.map((function(e){return{value:e.name,code:e.code}})),n(r);case 3:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),handleDutiesSelect:function(e){var t=this.duties,n=this.dutiesIsObj,a={name:e.value,code:e.code};if(t&&!n){var r=t.map((function(e){return e.code})).indexOf(a.code);if(r>-1)return this.$message.warning("已存在".concat(a.name))}this.$message.success("已选中".concat(a.name,"(").concat(a.code,")")),this.$emit("change",n||!t?a:t.concat([a]))}}},d=s,m=n("2877"),p=Object(m["a"])(d,l,o,!1,null,null,null),f=p.exports,h=function(){return{company:{},companyOfManage:{},duties:{},title:{}}},g={name:"Company",components:{CompanySelector:c["default"],DutiesSelector:f},props:{form:{type:Object,default:h()}},data:function(){return{innerForm:h()}},watch:{form:{handler:function(e){e&&e.company&&(this.innerForm=e)},deep:!0,immediate:!0},innerForm:{handler:function(e,t){var n=this;this.$nextTick((function(){n.$emit("update:form",n.innerForm)}))},deep:!0,immediate:!0}},methods:{companyChild:u["a"],companyTitleQuery:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["c"])(t);case 2:return a=e.sent,e.next=5,this.queryItem(a,n);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),queryItem:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.list,r=a.map((function(e){return{value:e.name,code:e.code}})),n(r);case 3:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}},y=g,v=Object(m["a"])(y,a,r,!1,null,null,null);t["default"]=v.exports},d6fa:function(e,t,n){"use strict";n("3f6b1")},fcac:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return m}));var a=n("b775"),r=n("6b43"),i="company";function c(e){return a["a"].get("".concat(i,"/companyChild"),{params:{id:e}})}var l="".concat(i,"/detail");function o(e){return Object(r["a"])("".concat(l,"/").concat(e),(function(){return a["a"].get(l,{params:{id:e}})}))}"".concat(i,"/companiesManagers");function u(e){var t=e.code,n=e.userCompanyType,r=e.pageIndex,i=e.pageSize;return a["a"].get("/company/members",{params:{code:t,userCompanyType:n,page:r,pageSize:i}})}function s(e,t,n){n=n||{pageSize:50,pageIndex:0};var r=n,i=r.pageSize,c=r.pageIndex;return Object(a["a"])({url:"/company/dutiesQuery",method:"get",params:{name:e,tag:t,pageSize:i,pageIndex:c}})}function d(e){return Object(a["a"])({url:"company/dutiesTag",method:"get",params:{tag:e}})}function m(e,t,n){n=n||{pageSize:20,pageIndex:0};var r=n,i=r.pageSize,c=r.pageIndex;return Object(a["a"])({url:"/company/titleQuery",method:"get",params:{name:e,tag:t,pageSize:i,pageIndex:c}})}}}]);