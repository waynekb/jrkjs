(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd4b7b7e","chunk-72d41aea"],{"0d50":function(e,t,n){},"18ad":function(e,t,n){"use strict";n("4cac")},"4cac":function(e,t,n){},6302:function(e,t,n){e.exports=n.p+"static/img/jianghe_logo.7e97e8d5.jpg"},"7ca8":function(e,t,n){"use strict";n("0d50")},"8ae5":function(e,t,n){"use strict";n("d022")},"9ed6":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"text-align":"center"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{directives:[{name:"loading",rawName:"v-loading",value:!e.bg,expression:"!bg"}],attrs:{span:14}},[e.bg?n("el-image",{staticClass:"full-img",attrs:{src:e.bg,fit:"contain"}}):e._e()],1),e._v(" "),n("el-col",{attrs:{span:10}},[n("LoginForm",{on:{login:e.handleLogin}})],1)],1)],1)},s=[],i=n("6302"),a=n.n(i),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"off"}},[n("div",{staticClass:"title-container"},[n("h3",{staticClass:"title"},[e._v(e._s(e.$t("login.defaultTitle")))]),e._v(" "),n("lang-select",{staticClass:"set-language"})],1),e._v(" "),n("el-divider"),e._v(" "),n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{ref:"username",attrs:{placeholder:"用户名或身份证号","auto-complete":"on",name:"username",tabindex:"1",type:"text"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),n("el-tooltip",{attrs:{content:"大写已开启",manual:"",placement:"right"},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{key:e.passwordType,ref:"password",attrs:{placeholder:"密码",type:e.passwordType,"auto-complete":"off",name:"password",tabindex:"2"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)},function(t){return e.checkCapslock.apply(null,arguments)}]},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[n("template",{slot:"append"},[n("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[n("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)])],2)],1)],1),e._v(" "),n("el-row",{staticStyle:{"margin-top":"1rem"},attrs:{type:"flex",justify:"space-around"}},[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin.apply(null,arguments)}}},[e._v(e._s(e.$t("login.title")))])],1),e._v(" "),n("el-divider"),e._v(" "),n("el-card",{staticStyle:{"margin-bottom":"0.5em"}},[n("div",[n("el-checkbox",{attrs:{label:"记住密码"},model:{value:e.loginForm.RememberUserPassword,callback:function(t){e.$set(e.loginForm,"RememberUserPassword",t)},expression:"loginForm.RememberUserPassword"}}),e._v(" "),n("el-tooltip",{attrs:{content:"每次打开网站时将自动登录"}},[n("el-checkbox",{attrs:{label:"记住我"},model:{value:e.loginForm.RememberMe,callback:function(t){e.$set(e.loginForm,"RememberMe",t)},expression:"loginForm.RememberMe"}})],1)],1),e._v(" "),n("div",[n("el-link",{attrs:{type:"info",href:"/#/forget"}},[e._v("忘记账号/密码？")])],1),e._v(" "),n("el-row",{staticStyle:{"margin-top":"1rem"},attrs:{type:"flex",justify:"space-around"}},[n("el-tooltip",{attrs:{effect:"light"}},[n("NotLoginRegisterNotice",{attrs:{slot:"content"},slot:"content"}),e._v(" "),n("el-button",{staticStyle:{width:"100%"},attrs:{type:"text"}},[e._v(e._s(e.$t("register.title")))])],1)],1)],1)],1)},l=[],c=n("61f7"),m=n("5723"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dropdown",{staticClass:"international",attrs:{trigger:"click"},on:{command:e.handleSetLanguage}},[n("div",[n("svg-icon",{attrs:{"class-name":"international-icon","icon-class":"language"}})],1),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{disabled:"zh"===e.language,command:"zh"}},[e._v("中文")]),e._v(" "),n("el-dropdown-item",{attrs:{disabled:"en"===e.language,command:"en"}},[e._v("English")])],1)],1)},u=[],d={computed:{language:function(){return this.$store.getters.language}},methods:{handleSetLanguage:function(e){this.$i18n.locale=e,this.$store.dispatch("app/setLanguage",e)}}},p=d,h=n("2877"),f=Object(h["a"])(p,g,u,!1,null,null,null),v=f.exports,w=n("5c96"),b=n("e90a"),y={name:"LoginForm",components:{LangSelect:v,NotLoginRegisterNotice:b["default"]},data:function(){var e=function(e,t,n){Object(c["g"])(t)?n():n(new Error("请输入正确的用户名"))},t=function(e,t,n){t&&t.length<8?n(new Error("密码不少于8位")):n()};return{wrongTime:0,loginForm:{username:"",password:"",RememberUserPassword:!1,RememberMe:!1,verify:201700816},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}]},passwordType:"password",capsTooltip:!1,loading:!1}},computed:{theme:function(){return this.$store.state.settings.theme},currentUser:function(){return this.$store.state.user.realName},hasLogin:function(){return this.$store.state.user.userid}},watch:{hasLogin:{handler:function(e){e&&Object(w["Message"])({message:"欢迎您，".concat(this.currentUser,"！"),type:"success",duration:8e3})},immediate:!0}},mounted:function(){""===this.loginForm.username?this.$refs.username.focus():""===this.loginForm.password&&this.$refs.password.focus(),this.loadLoginSetting()},methods:{checkCapslock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shiftKey,n=e.key;n&&1===n.length&&(this.capsTooltip=!!(t&&n>="a"&&n<="z"||!t&&n>="A"&&n<="Z")),"CapsLock"===n&&!0===this.capsTooltip&&(this.capsTooltip=!1)},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},loadLoginSetting:function(){var e=this,t=Object(m["e"])();this.loginForm.RememberUserPassword=t.RememberUserPassword,this.loginForm.RememberMe=t.RememberMe,this.loginForm.username=t.username,this.loginForm.RememberUserPassword&&(this.loginForm.password=Object(m["i"])(t.username)),this.loginForm.RememberMe&&!this.$store.state.user.isUserLogout&&(this.loading=!0,setTimeout((function(){return e.loginForm.RememberMe?e.$store.state.user.isUserLogout||e.hasLogin?(e.$emit("login",!0),void(e.loading=!1)):void e.handleLogin():(e.loading=!1,e.$message.warning("自动登录被终止"))}),2e3))},saveLoginSetting:function(){var e=Object.assign({},this.loginForm);Object(m["m"])(e)},handleLogin:function(){var e=this;this.loading=!0,this.$store.dispatch("user/login",this.loginForm).then((function(t){Object(w["Message"])({message:"登录成功",type:"success",duration:5e3}),e.$emit("login",!0),e.$store.dispatch("user/initUserInfo")})).catch((function(t){e.showLoginFailTip(t),e.$emit("login",!1)})).finally((function(){e.saveLoginSetting(),e.loading=!1}))},showLoginFailTip:function(e){var t="",n="";switch(e.status){case 12440:n="账号审批未通过且有紧急情况需报假?",t="可联系上一级领导、管理员或业务科，授权完成账号的审批";break;case 12450:n="账号审批被退回?",t='进入<a style="color:'.concat(this.theme,'" href="/#/register/user">注册页面</a> 选中【切换到审批模式】、搜索本人姓名找到本人账号、修改正确信息并重新提交');break;case 11500:this.wrongTime++,(this.wrongTime%3===0||this.wrongTime>10)&&(n="不记得密码了?",t='尝试<a style="color:'.concat(this.theme,'" href="/#/forget">找回密码</a>'));break;case 21e3:this.wrongTime++,(this.wrongTime%3===0||this.wrongTime>10)&&(n="不记得账号了?",t='尝试<a style="color:'.concat(this.theme,'" href="/#/forget">找回账号</a>'));break}var o={message:"<h3>".concat(n,'</h3><div style="margin-top:0.5em">').concat(t,"</div>"),dangerouslyUseHTMLString:!0,type:"info",duration:1e4};t&&this.$message(o)}}},_=y,k=(n("8ae5"),Object(h["a"])(_,r,l,!1,null,null,null)),$=k.exports,F={name:"Login",components:{LoginForm:$},data:function(){return{bg:a.a,loading:!1}},methods:{handleLogin:function(e){var t=this;this.loading=!0,console.log("login success,load user info"),this.$store.dispatch("user/initUserInfo").then((function(n){console.log("complete user info load"),t.$emit("login",e)})).finally((function(){t.loading=!1}))}}},L=F,T=(n("7ca8"),Object(h["a"])(L,o,s,!1,null,"4a7ebd84",null));t["default"]=T.exports},d022:function(e,t,n){},e90a:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SvgIcon",{attrs:{"icon-class":"Message_error","style-normal":"width:6rem;height:6rem;margin: auto;color:rgb(243, 126, 125)","class-name":"item-put-center"}}),e._v(" "),n("div",{staticClass:"item-put-center",staticStyle:{margin:"3rem 0 2rem 0","font-size":"2rem"}},[e._v("进入注册页面失败")]),e._v(" "),n("div",{staticClass:"item-put-center",staticStyle:{margin:"3rem 0 2rem 0","font-size":"1rem"}},[e._v("为保证您的账号安全")]),e._v(" "),n("div",{staticClass:"item-put-center",staticStyle:{margin:"3rem 0 2rem 0","font-size":"1.2rem"}},[n("span",[e._v("请")]),e._v(" "),n("el-link",{attrs:{type:"danger"},on:{click:e.handle_show_login_page}},[e._v("登录任何一名其他成员的账号")]),e._v(" "),n("span",[e._v("执行注册操作")])],1)],1)},s=[],i=n("c00a"),a={components:{SvgIcon:i["default"]},methods:{handle_show_login_page:function(){}}},r=a,l=(n("18ad"),n("2877")),c=Object(l["a"])(r,o,s,!1,null,"62610c1a",null);t["default"]=c.exports}}]);