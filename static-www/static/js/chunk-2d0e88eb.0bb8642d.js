(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e88eb"],{"8a7c":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.refresh,expression:"refresh"}]},[e._t("items"),e._v(" "),e.haveNext?n("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,type:"text"},on:{click:e.refresh}},[e._v(e._s(e.content))]):n("FlatLine")],2)},a=[],r=(n("c5f6"),{name:"InfinityList",components:{FlatLine:function(){return n.e("chunk-89b7eaba").then(n.bind(null,"4d54"))}},props:{immediateLoad:{type:Boolean,default:!0},pageSize:{type:Number,default:5},loadMethod:{type:Function,default:function(){}},loadPayload:{type:Object,default:function(){return{}}},loadPageMergeMethod:{type:Function,default:function(e,t){return Object.assign({page:t},e)}},items:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,haveNext:!0,inner_items:[],currentPage:0}},computed:{content:function(){var e=this.loading;return e?"加载中...":"点击加载更多记录"}},watch:{currentPage:{handler:function(e){this.$emit("update:currentPage",e)}},inner_items:{handler:function(e){this.$emit("update:items",e)}}},mounted:function(){this.immediateLoad&&this.refresh()},methods:{refresh:function(){var e=this;if(this.haveNext&&!this.loading){var t=this.loadPayload,n=this.loadMethod,i=this.loadPageMergeMethod;if(n){var a={index:this.currentPage,size:this.pageSize},r=i(t,a);this.loading=!0;var o=n(r);if(!o||!o.then)return this.loading=!1,console.warn("invlid fetching method");o.then((function(t){e.haveNext=t&&t.length>=e.pageSize,t&&(e.inner_items=e.inner_items.concat(t),e.currentPage++)})).finally((function(){e.$nextTick((function(){e.loading=!1}))}))}}},reset:function(){this.inner_items=[],this.currentPage=0,this.haveNext=!0}}}),o=r,s=n("2877"),u=Object(s["a"])(o,i,a,!1,null,null,null);t["default"]=u.exports}}]);