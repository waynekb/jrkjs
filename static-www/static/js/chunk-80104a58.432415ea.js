(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-80104a58"],{"0b00":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return u}));a("28a5"),a("ac6a"),a("5df3"),a("7f7f");var n=a("05f3");function r(t){var e=t.data,a=t.pageIndex,r=void 0===a?0:a,i=t.pageSize,s=void 0===i?2:i;return new Promise((function(t,a){n["a"].get_database({data:e,pageIndex:r,pageSize:s}).then((function(e){var r=e.databases,i=e.total,s=r.map((function(t){return new Promise((function(e,a){var r=t.name;n["a"].get_database_detail(r).then((function(a){var n=Object.assign(t,a);return e(n)})).catch((function(t){return e(null)}))}))}));Promise.all(s).then((function(e){return t({total:i,items:e})})).catch((function(t){return a(t)}))}))}))}function i(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"span",n={type:a,i:t,value:e,style:{"font-size":"1.2rem"}};return n}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"。",a=t[t.length-1];return a!==e&&(t+=e),t}function u(t){if(!t)return{items:[],count:0};var e=[];t=s(t);var a=t.split("\n"),n=0,r=0;return a.map((function(t){e.push(i(r,"","div"));var a=t.split("{{ANS}}")||[];a.map((function(t,s){e.push(i(r,t)),s<a.length-1&&e.push(c(n+s,t)),r++})),n+=a.length-1})),{items:e,count:n}}var o={size:"mini"};function c(t,e){var a={type:"el-input",i:t};return a.attrs=o,a.style={width:"15rem"},a}},"68bf":function(t,e,a){},"9aeb":function(t,e,a){"use strict";a("68bf")},d245:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("h2",[t._v("题库选取")]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("el-input",{attrs:{placeholder:"搜索题库代号..."},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("搜索")])],1),t._v(" "),a("InfinityList",{ref:"list",attrs:{"load-method":t.refresh,"load-payload":t.search,"load-page-merge-method":t.merge_page_payload,items:t.database},on:{"update:items":function(e){t.database=e}}},[a("template",{slot:"items"},[a("el-row",{attrs:{gutter:20}},t._l(t.database_filtered,(function(e){return a("el-col",{key:e.name,staticClass:"database-item",attrs:{lg:12,md:24}},[a("DataBase",{attrs:{data:e},on:{requireStart:t.requireStart}})],1)})),1)],1)],2)],1)},r=[],i=(a("7f7f"),a("c5f6"),a("55dd"),a("0b00")),s={name:"DataBaseSelector",components:{DataBase:function(){return a.e("chunk-6a0a0e56").then(a.bind(null,"6aed"))},InfinityList:function(){return a.e("chunk-2d0e88eb").then(a.bind(null,"8a7c"))}},data:function(){return{loading:!1,database:[],totalPage:0,search:{name:null}}},computed:{database_filtered:function(){var t=this.database||[],e=t.filter((function(t){return t})).filter((function(t){return t.problems}));return e=e.sort((function(t,e){return Number(t.index)-Number(e.index)})),e}},methods:{onSearch:function(){var t=this.$refs.list;t.reset(),t.refresh()},merge_page_payload:function(t,e){return Object.assign({data:t},{pageIndex:e.index,pageSize:e.size})},refresh:function(t){var e=this;return new Promise((function(a,n){Object(i["b"])(t).then((function(t){e.totalPage=t.total,a(t.items)})).catch((function(t){return n(t)}))}))},requireStart:function(t){var e=this,a=t.database,n=t.is_manual;a&&(this.loading=!0,this.$store.dispatch("problems/select_database",{database:a}).then((function(){e.$emit("requireStart",{database_name:a.name,is_manual:n})})).finally((function(){e.loading=!1})))}}},u=s,o=(a("9aeb"),a("2877")),c=Object(o["a"])(u,n,r,!1,null,"47671056",null);e["default"]=c.exports}}]);