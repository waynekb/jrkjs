(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-399b4592"],{"0b00":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a}));n("28a5"),n("ac6a"),n("5df3"),n("7f7f");var s=n("05f3");function i(t){var e=t.data,n=t.pageIndex,i=void 0===n?0:n,r=t.pageSize,u=void 0===r?2:r;return new Promise((function(t,n){s["a"].get_database({data:e,pageIndex:i,pageSize:u}).then((function(e){var i=e.databases,r=e.total,u=i.map((function(t){return new Promise((function(e,n){var i=t.name;s["a"].get_database_detail(i).then((function(n){var s=Object.assign(t,n);return e(s)})).catch((function(t){return e(null)}))}))}));Promise.all(u).then((function(e){return t({total:r,items:e})})).catch((function(t){return n(t)}))}))}))}function r(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"span",s={type:n,i:t,value:e,style:{"font-size":"1.2rem"}};return s}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"。",n=t[t.length-1];return n!==e&&(t+=e),t}function a(t){if(!t)return{items:[],count:0};var e=[];t=u(t);var n=t.split("\n"),s=0,i=0;return n.map((function(t){e.push(r(i,"","div"));var n=t.split("{{ANS}}")||[];n.map((function(t,u){e.push(r(i,t)),u<n.length-1&&e.push(l(s+u,t)),i++})),s+=n.length-1})),{items:e,count:s}}var o={size:"mini"};function l(t,e){var n={type:"el-input",i:t};return n.attrs=o,n.style={width:"15rem"},n}},"112c":function(t,e,n){var s={"./ProblemAnalysis/index.vue":"f3f0","./ProblemBase/ProblemHeader/index.vue":"e294","./ProblemBase/index.vue":"47d6","./ProblemBlanking/index.vue":"e985","./ProblemJudging/index.vue":"f39b","./ProblemLongAnswer/index.vue":"e619","./ProblemMultiSelect/index.vue":"89d8","./ProblemSingleSelect/index.vue":"e69f","./ProblemType/index.vue":"df1fc","./index.vue":"e39d"};function i(t){var e=r(t);return n(e)}function r(t){var e=s[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}i.keys=function(){return Object.keys(s)},i.resolve=r,t.exports=i,i.id="112c"},2428:function(t,e,n){},3133:function(t,e,n){"use strict";n("44f8")},3754:function(t,e,n){},"39b8":function(t,e,n){},"3ab8":function(t,e,n){"use strict";n("dd26")},"44f8":function(t,e,n){},"47d6":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticClass:"base-card",style:{"box-shadow":t.styleBoxShadow},nativeOn:{mouseenter:function(e){return t.onMouseEnter.apply(null,arguments)},mouseleave:function(e){return t.onMouseLeave.apply(null,arguments)}},scopedSlots:t._u([{key:"header",fn:function(){return[n("ProblemHeader",t._b({ref:"header",attrs:{"show-answer":t.showAnswer},on:{"update:showAnswer":function(e){t.showAnswer=e},"update:show-answer":function(e){t.showAnswer=e},onAnswer:t.onAnswer}},"ProblemHeader",t.$props,!1))]},proxy:!0}])},[t._v(" "),n("div",{ref:"content",staticClass:"content-container"},[t.reset_index?t._t("content",null,null,t.$props):t._e()],2),t._v(" "),n("ProblemAnalysis",t._b({attrs:{"show-answer":t.showAnswer,"user-answer":t.user_answer,"user-answer-result":t.userAnswerResult,"user-answer-confirm-result":t.userAnswerConfirmResult},on:{"update:showAnswer":function(e){t.showAnswer=e},"update:show-answer":function(e){t.showAnswer=e},onAnswerResult:t.onAnswerResult}},"ProblemAnalysis",t.$props,!1))],1)},i=[];n("7f7f"),n("c5f6"),n("ac6a"),n("456d");function r(t,e,n){var s={total:0,wrong:0,combo_kill:0,last_wrong:null,total_time:0,first_view:null};t||(t={}),Object.keys(s).map((function(e){t[e]||(t[e]=s[e])})),t.total++;var i=new Date;return t.first_view||(t.first_view=i),t.total_time+=n,t.combo_kill++,e||(t.wrong++,t.combo_kill=0,t.last_wrong=i),t}var u=n("b557"),a=n("05f3"),o=n("ed08"),l={name:"ProblemBase",components:{ProblemAnalysis:function(){return Promise.resolve().then(n.bind(null,"f3f0"))},ProblemHeader:function(){return Promise.resolve().then(n.bind(null,"e294"))}},props:{onlyRead:{type:Boolean,default:!1},data:{type:Object,default:null},focus:{type:Boolean,default:!1},index:{type:Number,default:null}},data:function(){return{showAnswer:!1,user_answer:null,userAnswerResult:null,userAnswerConfirmResult:!1,lastEnter:0,time_spent:0,mouse_active:!1,reset_index:!0,is_right:null,styleBoxShadow:null}},computed:{options:function(){return this.$store.state.problems.current_options},lighting_mode:function(){return this.options&&this.options.lighting_mode},current_database:function(){return this.$store.state.problems.current_database},requireUpdateBoxShadow:function(){var t=this;return Object(o["b"])((function(){t.update_box_shadow()}),200)}},watch:{userAnswerConfirmResult:{handler:function(t){this.$emit("update:completed",t?new Date:null)}},mouse_active:function(){this.requireUpdateBoxShadow()},focus:function(){this.requireUpdateBoxShadow()},is_right:function(){this.requireUpdateBoxShadow()}},methods:{update_box_shadow:function(){var t=this,e=function(){var e=t.mouse_active,n=t.focus,s=t.is_right;if(null===s)return e?"0 2px 12px 0 ".concat(u["b"].mouse_focus):n?"0 2px 12px 0 ".concat(u["b"].focus):null;var i="0 4px 12px 0 ",r="".concat(i).concat(s?u["b"].answer_right:u["b"].answer_wrong);return console.log("change to ",r),r};this.styleBoxShadow=e()},reset:function(){var t=this;this.showAnswer=!1,this.userAnswerResult=null,this.userAnswerConfirmResult=!1,this.reset_index=!1,this.$nextTick((function(){t.reset_index=!0}));var e=this.$refs.header;e&&e.reset()},onSubmit:function(t){var e=t.is_right,n=t.is_manual,s=t.answer,i=this.$refs.header;i&&i.practice_submit({is_right:e,is_manual:n,answer:s})},onMouseEnter:function(){this.lastEnter=new Date,this.mouse_active=!0},onMouseLeave:function(){this.mouse_active=!1,this.recordSpendTime()},recordSpendTime:function(){var t=this.lastEnter,e=new Date-t;this.time_spent+=e},onAnswer:function(t){var e=t.is_right,n=t.is_manual,s=t.answer;(null===this.is_right||this.is_right)&&(this.is_right=e);var i=!(null===this.userAnswerResult);if(this.userAnswerResult=e,this.user_answer=s,i||e&&this.lighting_mode&&!n)return this.onAnswerResult({is_right:e,is_manual:n,answer:s})},onAnswerResult:function(t){var e=t.is_right,n=t.is_manual,s=t.answer;(null===this.is_right||this.is_right)&&(this.is_right=e),console.warn("onAnswerResult",e,n,s),this.userAnswerConfirmResult=!0,this.showAnswer=!1,console.log("update_problem",e,n,s),this.update_problem({is_right:e,is_manual:n,answer:s})},update_problem:function(t){var e=this,n=t.is_right,s=t.is_manual,i=t.answer,u=this.current_database.name,o=this.data,l=this.time_spent;a["a"].user_problem_result({database:u}).then((function(t){var c=o.id||o.content,f=r(t[c],n,l);e.$emit("onSubmit",{is_right:n,is_manual:s,answer:i}),console.log("update problem",c,f),a["a"].user_problem_result({database:u,problem_id:c,val:f})}))}}},c=l,f=n("2877"),d=Object(f["a"])(c,s,i,!1,null,null,null);e["default"]=d.exports},"60f4":function(t,e,n){"use strict";n("af15")},7037:function(t,e,n){},"755c5":function(t,e,n){"use strict";n("9c1a")},"7dd5":function(t,e,n){},"89d8":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._l(t.blanking,(function(e,s){return n(e.type,t._b({key:s,ref:""+e.type+e.i,refInFor:!0,tag:"component",style:e.style,nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit({})}},model:{value:t.user_input[e.i],callback:function(n){t.$set(t.user_input,e.i,n)},expression:"user_input[b.i]"}},"component",e.attrs,!1),[t._v(t._s(e.value)+"\n  ")])})),t._v(" "),n("div",{staticClass:"p-ms"},[n("el-checkbox-group",{attrs:{size:"mini"},model:{value:t.user_input,callback:function(e){t.user_input=e},expression:"user_input"}},t._l(t.filtered_options,(function(e,s){return n("el-checkbox",{key:s,staticClass:"opt-single",attrs:{disabled:s<t.options.length&&t.is_select_all,label:s+1}},[t._v(t._s(String.fromCharCode(65+s)+"."+e)+"\n      ")])})),1)],1),t._v(" "),n("el-button",{staticClass:"pb",attrs:{type:t.btn_submit.btn_types||"text",size:t.btn_submit.btn_sizes||"mini"},on:{click:function(e){return t.onSubmit({})}}},[t._v("\n    提交")]),t._v(" "),t.btn_select_all.btn_show?n("el-button",{staticClass:"pb",attrs:{type:t.btn_select_all.btn_types||"text",size:t.btn_select_all.btn_sizes||"mini"},on:{click:function(e){return t.onSubmit({is_select_all:!0})}}},[t._v("全选并提交")]):t._e()],2)},i=[],r=(n("7514"),n("55dd"),n("20d6"),n("c5f6"),n("0b00")),u={label:"多项选择",name:"ProblemMultiSelect",components:{},props:{data:{type:Object,default:null},focus:{type:Boolean,default:!1},index:{type:Number,default:null},preferences:{type:Object,default:null}},data:function(){return{blanking:null,user_input:[],options:[],focus_callback_set:null}},computed:{btn_submit:function(){return this.preferences&&this.preferences.btn_submit||{}},btn_select_all:function(){return this.preferences&&this.preferences.btn_select_all||{}},user_options:function(){return this.$store.state.problems.current_options},enable_select_all:function(){return this.user_options&&this.user_options.enable_select_all},filtered_options:function(){var t=this.options,e=this.enable_select_all;return t?e?t.concat(["全选"]):t:[]},is_select_all:function(){var t=this.enable_select_all,e=this.user_input,n=this.options;return t&&e[e.length-1]>n.length}},watch:{"data.id":{handler:function(t){this.refresh(t)},immediate:!0},focus:{handler:function(t){this.setKeyHandler(t)},immediate:!0}},destroyed:function(){this.setKeyHandler(!1)},methods:{setKeyHandler:function(t){if(t&&!this.focus_callback_set)return console.log("callback is set to",this.index),document.addEventListener("keyup",this.keyInput),void(this.focus_callback_set=!0);this.focus_callback_set&&(console.log("callback remove from",this.index),document.removeEventListener("keyup",this.keyInput),this.focus_callback_set=!1)},keyInput:function(t){var e=t.ctrlKey,n=t.altKey,s=t.key;if(console.log("key input",e,n,s,this.data.id),e&&n){if("ArrowRight"===s)return this.directSubmit({is_right:!1,is_manual:!0});if("ArrowLeft"===s)return this.directSubmit({is_right:!0,is_manual:!0});if("Enter"===s)return this.onSubmit({});var i=parseInt(s);if(i){var r=this.user_input.findIndex((function(t){return t===i}));r>-1?this.user_input.splice(r,1):this.filtered_options.length>=i&&this.user_input.push(i)}}},onSubmit:function(t){var e=t.is_select_all;e|=this.is_select_all;var n=this.user_input,s=this.options,i=e?s.map((function(t,e){return e+1})):n,r=i.filter((function(t){return t>0})).sort((function(t,e){return t-e}));return this.judgeSubmit(r)},judgeSubmit:function(t){var e=this.data.answer;if(!e)return this.$message.warning("本题无答案");e=e.sort((function(t,e){return t-e}));var n=e.length===t.length&&!e.find((function(e,n){return e!==t[n]}));return this.directSubmit({is_right:n,answer:t})},directSubmit:function(t){var e=t.is_right,n=t.is_manual,s=t.answer;return this.$emit("onUserSubmit",{is_right:e,is_manual:n,answer:s})},refresh:function(t){var e=this.data;if(e){var n=e.options,s=e.content;if(s){this.options=n,this.user_input=[];var i=Object(r["a"])(s);this.blanking=i.items}}},set_focus:function(){console.log("focus single")}}},a=u,o=(n("ab5c"),n("dc6e"),n("2877")),l=Object(o["a"])(a,s,i,!1,null,"6e5220c6",null);e["default"]=l.exports},"94c0":function(t,e,n){},"9c1a":function(t,e,n){},a53a:function(t,e,n){"use strict";n("94c0")},a95a:function(t,e,n){},a96c:function(t,e,n){"use strict";n("2428")},a9c5:function(t,e,n){},ab5c:function(t,e,n){"use strict";n("3754")},add2:function(t,e,n){"use strict";n("a9c5")},af15:function(t,e,n){},b557:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));n("28a5");var s=n("05f3");function i(t){if(!t)return null;var e=s["a"].ProblemTypeReverse[t];if(!e)return null;var n=function(t){var e=t.substring(1),n=t[0].toUpperCase();return"".concat(n).concat(e)},i=e.split("_").map((function(t){return n(t)}));return"Problem".concat(i.join(""))}var r={focus:"#0ff7f0",mouse_focus:"#000ce6",answer_right:"#1bdb0d",answer_wrong:"#e60800"}},ca96:function(t,e,n){"use strict";n("a95a")},ccca:function(t,e,n){"use strict";n("7dd5")},dc6e:function(t,e,n){"use strict";n("39b8")},dd26:function(t,e,n){},df1fc:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-tag",[t._v(t._s(t.dict[t.data]||t.dict[0]))])},i=[],r=(n("c5f6"),n("05f3")),u={name:"ProblemType",props:{data:{type:Number,default:0}},computed:{dict:function(){return r["a"].ProblemAliasReverse}}},a=u,o=n("2877"),l=Object(o["a"])(a,s,i,!1,null,null,null);e["default"]=l.exports},e294:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("span",[t._v(t._s(t.index+1)+".")]),t._v(" "),t.data?n("span",[n("span",{staticClass:"global-index"},[t._v("["+t._s(t.data.index+1)+"]")]),t._v(" "),t.data.score?n("span",[t._v(t._s(t.data.score)+"分")]):t._e(),t._v(" "),n("ProblemType",{attrs:{data:t.data.type}}),t._v(" "),t.options.practice_mode&&!t.beenSolved?n("span",[n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.practice_submit({is_right:!0,is_manual:!0})}}},[t._v("会做")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(e){return t.practice_submit({is_right:!1,is_manual:!0})}}},[t._v("不会做")])],1):t.beenSolved?n("el-button",{attrs:{type:"text"},on:{click:t.reset}},[t._v("重做")]):t._e(),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.showAnswer,expression:"!showAnswer"}],attrs:{type:"text"},on:{click:function(e){return t.requireShowAnswer()}}},[t._v("查看解析")]),t._v(" "),t.showAnswer&&t.combo_kill_desc?n("span",{staticClass:"problem-info"},[t._v(t._s(t.combo_kill_desc))]):t._e()],1):t._e()])},i=[],r=(n("c5f6"),{name:"ProblemHeader",components:{ProblemType:function(){return Promise.resolve().then(n.bind(null,"df1fc"))}},props:{data:{type:Object,default:null},index:{type:Number,default:null},showAnswer:{type:Boolean,default:!1}},data:function(){return{beenSolved:!1}},computed:{combo_kill_desc:function(){var t=this.data,e=this.current_problems,n=e[t.id];if(!n)return"暂无记录";var s=n.combo_kill;return"连对".concat(s||0,"次")},current_problems:function(){return this.$store.state.problems.current_problems},options:function(){return this.$store.state.problems.current_options}},methods:{reset:function(){this.beenSolved=!1,this.requireShowAnswer(!1)},requireShowAnswer:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$emit("update:showAnswer",t)},practice_submit:function(t){var e=t.is_right,n=t.is_manual,s=t.answer;!this.beenSolved||n?(this.beenSolved||(e?this.$message.success(n?"我会做！":"做对啦~"):this.$message.error((n?"不会做":"做错了")+"，仔细看看哦~"),this.requireShowAnswer(),this.beenSolved=!0),this.$emit("onAnswer",{is_right:e,is_manual:n,answer:s})):this.$message.warning("已提交过答案啦")}}}),u=r,a=(n("60f4"),n("2877")),o=Object(a["a"])(u,s,i,!1,null,"c2ad6410",null);e["default"]=o.exports},e39d:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"singe-problem",on:{dblclick:t.onClick}},[t.type?n("ProblemBase",t._b({ref:"base",attrs:{completed:t.completed},on:{"update:completed":function(e){t.completed=e},onSubmit:function(e){return t.handle_submit(e)}}},"ProblemBase",t.$props,!1),[n(t.type,t._b({tag:"component",attrs:{slot:"content"},on:{onUserSubmit:t.onSubmit},slot:"content"},"component",t.$props,!1))],1):n("el-popover",{attrs:{trigger:"hover"},scopedSlots:t._u([{key:"reference",fn:function(){return[n("el-button",{attrs:{type:"text"}},[t._v(t._s(t.index)+".暂不支持的题型")])]},proxy:!0}])},[n("span",{staticClass:"single-invalid"},[t._v(t._s(t.d))])])],1)},i=[],r=(n("8e6e"),n("ac6a"),n("456d"),n("7514"),n("96cf"),n("1da1")),u=(n("c5f6"),n("ade3")),a=(n("a481"),n("28a5"),function(t,e){var n={};return e||(e=function(t){return t.join(".")}),t.keys().map((function(s){var i=s.split("/");i.shift();var r=t(s);if(r=r&&r.default,r){var u=e(i,r);u&&(n[u]=r)}})),n}),o=function(t){var e=function(t,e){return t.length>2||!e||!e.label?null:t.join(".").replace(".index","").replace(".vue","")};return a(t,e)},l=n("399b"),c=n("05f3"),f=n("b557");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(u["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p=o(n("112c")),m={name:"Problem",components:_(_({},p),{},{ProblemBase:function(){return Promise.resolve().then(n.bind(null,"47d6"))}}),props:{onlyRead:{type:Boolean,default:!1},show:{type:Boolean,default:!0},data:{type:Object,default:null},focus:{type:Boolean,default:!1},index:{type:Number,default:null},options:{type:Object,default:null},preferences:{type:Object,default:null}},data:function(){return{ProblemType:c["a"].ProblemType,completed:null,submitted:!1}},computed:{d:function(){return this.data||{}},type:function(){var t=this.d,e=Object(f["a"])(t.type);return e}},watch:{completed:{handler:function(t){this.$emit("update:completed",t)},immediate:!0}},methods:{handle_submit:function(t){var e=t.is_right,n=t.is_manual,s=t.answer;if(console.log("handle_submit",e,n,s),!this.submitted)return console.log("handle_submit_true",e,n,s),this.submitted=!0,this.$emit("onSubmit",{is_right:e,is_manual:n,answer:s})},onClick:function(){this.$emit("requireFocus")},onSubmit:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,s,i,r,u,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.is_right,s=e.is_manual,i=e.answer,r=!i||Object(l["c"])(i)===l["a"]&&(!i.length||void 0===i.find((function(t){return t}))),!r||s){t.next=8;break}return t.next=5,this.$confirm("确定要不填答案就提交吗").catch((function(t){}));case 5:if(u=t.sent,"confirm"===u){t.next=8;break}return t.abrupt("return");case 8:a=this.$refs.base,a&&a.onSubmit({is_right:n,is_manual:s,answer:i});case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),reset:function(){this.completed=null,this.submitted=!1;var t=this.$refs.base;t&&t.reset()}}},h=m,b=(n("a96c"),n("2877")),v=Object(b["a"])(h,s,i,!1,null,"e36b98e2",null);e["default"]=v.exports},e619:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._l(t.blanking,(function(e,s){return n(e.type,t._b({key:s,ref:""+e.type+e.i,refInFor:!0,tag:"component",style:e.style,nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.onSubmit(e)}},model:{value:t.user_input[e.i],callback:function(n){t.$set(t.user_input,e.i,n)},expression:"user_input[b.i]"}},"component",e.attrs,!1),[t._v(t._s(e.value)+"\n  ")])})),t._v(" "),n("div",{staticClass:"p-ms"},[n("el-input",{attrs:{type:"textarea",autosize:""},model:{value:t.user_input,callback:function(e){t.user_input=e},expression:"user_input"}})],1),t._v(" "),n("el-button",{staticClass:"pb",attrs:{type:t.btn_submit.btn_types||"text",size:t.btn_submit.btn_sizes||"mini"},on:{click:t.onSubmit}},[t._v("提交\n  ")])],2)},i=[],r=(n("c5f6"),n("0b00")),u={label:"判断",name:"ProblemJudge",components:{},props:{data:{type:Object,default:null},focus:{type:Boolean,default:!1},index:{type:Number,default:null},preferences:{type:Object,default:null}},data:function(){return{blanking:null,user_input:"",options:[],focus_callback_set:null}},computed:{btn_submit:function(){return this.preferences&&this.preferences.btn_submit||{}}},watch:{"data.id":{handler:function(t){this.refresh(t)},immediate:!0},focus:{handler:function(t){this.setKeyHandler(t)},immediate:!0}},destroyed:function(){this.setKeyHandler(!1)},methods:{setKeyHandler:function(t){if(t&&!this.focus_callback_set)return console.log("callback is set to",this.index),document.addEventListener("keyup",this.keyInput),void(this.focus_callback_set=!0);this.focus_callback_set&&(console.log("callback remove from",this.index),document.removeEventListener("keyup",this.keyInput),this.focus_callback_set=!1)},keyInput:function(t){var e=t.ctrlKey,n=t.altKey,s=t.key;if(console.log("key input",e,n,s,this.data.id),e&&n)return"ArrowRight"===s?this.directSubmit({is_right:!1,is_manual:!0}):"ArrowLeft"===s?this.directSubmit({is_right:!0,is_manual:!0}):"Enter"===s?this.onSubmit():void 0},onSubmit:function(){var t=this.user_input;return this.judgeSubmit(t)},handleClick:function(){console.log(1)},judgeSubmit:function(t){var e=this.data.answer;if(!e)return this.$message.warning("本题无答案");var n=e===t;return this.directSubmit({is_right:n,answer:t})},directSubmit:function(t){var e=t.is_right,n=t.is_manual,s=t.answer;return this.$emit("onUserSubmit",{is_right:e,is_manual:n,answer:s})},refresh:function(t){var e=this.data&&this.data.content;if(e){var n=Object(r["a"])(e);this.user_input="",this.blanking=n.items}else this.blanking=null}}},a=u,o=(n("3133"),n("a53a"),n("2877")),l=Object(o["a"])(a,s,i,!1,null,"9edbd3b4",null);e["default"]=l.exports},e69f:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._l(t.blanking,(function(e,s){return n(e.type,t._b({key:s,ref:""+e.type+e.i,refInFor:!0,tag:"component",style:e.style,nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.onSubmit(e)}},model:{value:t.user_input[e.i],callback:function(n){t.$set(t.user_input,e.i,n)},expression:"user_input[b.i]"}},"component",e.attrs,!1),[t._v(t._s(e.value)+"\n  ")])})),t._v(" "),n("div",{staticClass:"p-ms"},[n("el-radio-group",{attrs:{size:"mini"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit.apply(null,arguments)}},model:{value:t.user_input,callback:function(e){t.user_input=e},expression:"user_input"}},t._l(t.options,(function(e,s){return n("el-radio",{key:s,staticClass:"opt-single",attrs:{label:s+1}},[t._v(t._s(String.fromCharCode(65+s)+"."+e))])})),1)],1),t._v(" "),n("el-button",{staticClass:"pb",attrs:{type:t.btn_submit.btn_types||"text",size:t.btn_submit.btn_sizes||"mini"},on:{click:t.onSubmit}},[t._v("提交\n  ")])],2)},i=[],r=(n("c5f6"),n("0b00")),u={label:"单项选择",name:"ProblemSingleSelect",components:{},props:{data:{type:Object,default:null},focus:{type:Boolean,default:!1},index:{type:Number,default:null},preferences:{type:Object,default:null}},data:function(){return{blanking:null,user_input:0,options:[],focus_callback_set:null}},computed:{btn_submit:function(){return this.preferences&&this.preferences.btn_submit||{}}},watch:{"data.id":{handler:function(t){this.refresh(t)},immediate:!0},focus:{handler:function(t){this.setKeyHandler(t)},immediate:!0}},destroyed:function(){this.setKeyHandler(!1)},methods:{setKeyHandler:function(t){if(t&&!this.focus_callback_set)return console.log("callback is set to",this.index),document.addEventListener("keyup",this.keyInput),void(this.focus_callback_set=!0);this.focus_callback_set&&(console.log("callback remove from",this.index),document.removeEventListener("keyup",this.keyInput),this.focus_callback_set=!1)},keyInput:function(t){var e=t.ctrlKey,n=t.altKey,s=t.key;if(console.log("key input",e,n,s,this.data.id),e&&n){if("ArrowRight"===s)return this.directSubmit({is_right:!1,is_manual:!0});if("ArrowLeft"===s)return this.directSubmit({is_right:!0,is_manual:!0});if("Enter"===s)return this.onSubmit();var i=parseInt(t.key);i&&(this.options.length<i||(this.user_input=i))}},onSubmit:function(){var t=this.user_input;return this.judgeSubmit(t)},judgeSubmit:function(t){var e=this.data.answer;if(!e)return this.$message.warning("本题无答案");var n=Number(e)===Number(t);return this.directSubmit({is_right:n,answer:t})},directSubmit:function(t){var e=t.is_right,n=t.is_manual,s=t.answer;return this.$emit("onUserSubmit",{is_right:e,is_manual:n,answer:s})},refresh:function(t){var e=this.data;if(e){var n=e.options,s=e.content;if(s){this.options=n,this.user_input=[];var i=Object(r["a"])(s);this.blanking=i.items}}}}},a=u,o=(n("add2"),n("ccca"),n("2877")),l=Object(o["a"])(a,s,i,!1,null,"00c104fd",null);e["default"]=l.exports},e985:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",t._l(t.blanking,(function(e,s){return n(e.type,t._b({key:s,ref:""+e.type+e.i,refInFor:!0,tag:"component",style:e.style,on:{click:function(n){t.current_index=e.i}},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.onSubmit(e)}},model:{value:t.user_input[e.i],callback:function(n){t.$set(t.user_input,e.i,n)},expression:"user_input[b.i]"}},"component",e.attrs,!1),[t._v(t._s(e.value)+"\n  ")])})),1)},i=[],r=(n("7514"),n("c5f6"),n("0b00")),u={label:"填空",name:"ProblemBlanking",components:{},props:{data:{type:Object,default:null},focus:{type:Boolean,default:!1},index:{type:Number,default:null}},data:function(){return{blanking:null,user_input:[],focus_callback_set:null,current_index:0}},watch:{data:{handler:function(t){this.refresh(t)},immediate:!0,deep:!0},focus:{handler:function(t){this.setKeyHandler(t)},immediate:!0}},destroyed:function(){this.setKeyHandler(!1)},methods:{setKeyHandler:function(t){if(t&&!this.focus_callback_set)return console.log("callback is set to",this.index),document.addEventListener("keyup",this.keyInput),void(this.focus_callback_set=!0);this.focus_callback_set&&(console.log("callback remove from",this.index),document.removeEventListener("keyup",this.keyInput),this.focus_callback_set=!1)},onFocus:function(t){var e=this.$refs["".concat(t.type).concat(this.current_index)],n=e&&e[0];n&&n.focus()},keyInput:function(t){var e=t.ctrlKey,n=t.altKey,s=t.key;if(console.log("key input",t,e,n,s,this.data.id),e&&n)return"ArrowRight"===s?this.directSubmit({is_right:!1,is_manual:!0}):"ArrowLeft"===s?this.directSubmit({is_right:!0,is_manual:!0}):void("Enter"===s&&this.onSubmit({type:"el-input",i:this.current_index}))},onSubmit:function(t){return this.current_index=t.i+1,t.i+1<this.user_input.length?this.onFocus(t):this.judgeSubmit(this.user_input)},judgeSubmit:function(t){var e=this.data.answer,n=!e.find((function(e,n){return e!==t[n]}));return this.directSubmit({is_right:n,answer:t})},directSubmit:function(t){var e=t.is_right,n=t.is_manual,s=t.answer;return this.$emit("onUserSubmit",{is_right:e,is_manual:n,answer:s})},refresh:function(t){var e=this.data&&this.data.content;if(e){var n=Object(r["a"])(e);this.user_input=new Array(n.count),this.blanking=n.items}else this.blanking=null}}},a=u,o=(n("3ab8"),n("2877")),l=Object(o["a"])(a,s,i,!1,null,"2b81d5bc",null);e["default"]=l.exports},f39b:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._l(t.blanking,(function(e,s){return n(e.type,t._b({key:s,ref:""+e.type+e.i,refInFor:!0,tag:"component",style:e.style,nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.onSubmit(e)}},model:{value:t.user_input[e.i],callback:function(n){t.$set(t.user_input,e.i,n)},expression:"user_input[b.i]"}},"component",e.attrs,!1),[t._v(t._s(e.value)+"\n  ")])})),t._v(" "),n("div",{staticClass:"p-ms"},[n("el-radio-group",{attrs:{size:"mini"},model:{value:t.user_input,callback:function(e){t.user_input=e},expression:"user_input"}},[n("el-radio-button",{attrs:{label:1}},[t._v("正确")]),t._v(" "),n("el-radio-button",{attrs:{label:2}},[t._v("错误")])],1)],1),t._v(" "),n("el-button",{staticClass:"pb",attrs:{type:t.btn_submit.btn_types||"text",size:t.btn_submit.btn_sizes||"mini"},on:{click:t.onSubmit}},[t._v("提交\n  ")])],2)},i=[],r=(n("c5f6"),n("0b00")),u={label:"判断",name:"ProblemJudge",components:{},props:{data:{type:Object,default:null},focus:{type:Boolean,default:!1},index:{type:Number,default:null},preferences:{type:Object,default:null}},data:function(){return{blanking:null,user_input:0,options:[],focus_callback_set:null}},computed:{btn_submit:function(){return this.preferences&&this.preferences.btn_submit||{}}},watch:{"data.id":{handler:function(t){this.refresh(t)},immediate:!0},focus:{handler:function(t){this.setKeyHandler(t)},immediate:!0}},destroyed:function(){this.setKeyHandler(!1)},methods:{setKeyHandler:function(t){if(t&&!this.focus_callback_set)return console.log("callback is set to",this.index),document.addEventListener("keyup",this.keyInput),void(this.focus_callback_set=!0);this.focus_callback_set&&(console.log("callback remove from",this.index),document.removeEventListener("keyup",this.keyInput),this.focus_callback_set=!1)},keyInput:function(t){var e=t.ctrlKey,n=t.altKey,s=t.key;if(console.log("key input",e,n,s,this.data.id),e&&n){if("ArrowRight"===s)return this.directSubmit({is_right:!1,is_manual:!0});if("ArrowLeft"===s)return this.directSubmit({is_right:!0,is_manual:!0});if("Enter"===s)return this.onSubmit();var i=parseInt(t.key);i&&(i>2||(this.user_input=i))}},onSubmit:function(){var t=this.user_input;return this.judgeSubmit(t)},handleClick:function(){console.log(1)},judgeSubmit:function(t){var e=this.data.answer?1:2;if(!e)return this.$message.warning("本题无答案");var n=Number(e)===Number(t);return this.directSubmit({is_right:n,answer:t})},directSubmit:function(t){var e=t.is_right,n=t.is_manual,s=t.answer;return this.$emit("onUserSubmit",{is_right:e,is_manual:n,answer:s})},refresh:function(t){var e=this.data&&this.data.content;if(e){var n=Object(r["a"])(e);this.user_input=0,this.blanking=n.items}else this.blanking=null}}},a=u,o=(n("fa23"),n("755c5"),n("2877")),l=Object(o["a"])(a,s,i,!1,null,"c2b05880",null);e["default"]=l.exports},f3f0:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-fade-in-linear"}},[t.showAnswer?n("div",[n("el-divider"),t._v(" "),n("el-button",{staticClass:"analysis-btn-hide",attrs:{type:"text",icon:"el-icon-hide"},on:{click:function(e){return t.$emit("update:showAnswer",!1)}}},[t._v("\n      隐藏解析")]),t._v(" "),n("el-row",[n("el-col",{attrs:{span:16}},[n("el-form",{attrs:{"label-width":"5rem"}},[n("el-form-item",{attrs:{label:"答案"}},[n("div",[n("span",[t._v(t._s(t.answer))]),t._v(" "),n("span",{staticClass:"answer-user"},[n("span",{staticClass:"answer-user-label"},[t._v("您的答案")]),t._v(" "),n("span",[t._v(t._s(t.user_answer))])])])]),t._v(" "),n("el-form-item",{attrs:{label:"解析"}},[n("div",[t._v(t._s(t.data.analysis||"无"))])])],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[t.status?n("el-form",{attrs:{"label-width":"5rem"}},[n("el-form-item",{attrs:{label:"总刷题数"}},[n("div",[t._v(t._s(t.status.total))])]),t._v(" "),n("el-form-item",{attrs:{label:"平均用时"}},[n("div",[t._v(t._s(Math.ceil(t.status.total_time/t.status.total)/1e3)+"秒")])]),t._v(" "),n("el-form-item",{attrs:{label:"上次出错"}},[n("div",[t._v(t._s(t.parseTime(t.status.last_wrong)))])]),t._v(" "),n("el-form-item",{attrs:{label:"错误数"}},[n("div",[t._v(t._s(t.status.wrong))])])],1):n("div",[t._v("暂无统计")])],1)],1),t._v(" "),null===t.userAnswerResult||t.userAnswerConfirmResult?t._e():n("div",{staticClass:"btn-group"},[n("el-button",{ref:"btn_confirm",staticClass:"btn-primary",attrs:{type:"success"},on:{click:function(e){return t.$emit("onAnswerResult",{is_right:!0,is_manual:!0})}}},[t._v("确认会做")]),t._v(" "),n("el-button",{staticClass:"btn-primary",attrs:{type:"danger"},on:{click:function(e){return t.$emit("onAnswerResult",{is_right:!1,is_manual:!0})}}},[t._v("\n        确认不会做")])],1)],1):t._e()])},i=[],r=(n("c5f6"),n("ed08")),u=n("399b"),a={name:"ProblemAnalysis",props:{data:{type:Object,default:null},showAnswer:{type:Boolean,default:!1},options:{type:Object,default:null},userAnswer:{type:[Object,Array,Boolean,String,Number],default:null},userAnswerResult:{type:Boolean,default:null},userAnswerConfirmResult:{type:Boolean,default:!1}},computed:{status:function(){var t=this.data,e=this.current_problems,n=e[t.id];return n},current_problems:function(){return this.$store.state.problems.current_problems},answer:function(){if(!this.data)return null;var t=this.data.answer;return this.convert_answer_from_raw(t)},user_answer:function(){var t=this.userAnswer;return this.convert_answer_from_raw(t)}},watch:{userAnswerResult:{handler:function(t){}}},methods:{parseTime:r["d"],convert_answer_from_raw:function(t){return t?t instanceof Array?t.map(this.convert_answer):this.convert_answer(t):"无答案"},convert_answer:function(t){var e=Object(u["c"])(t);return e===u["d"]?String.fromCharCode("A".charCodeAt(0)+t-1):e===u["b"]?t?"√":"×":(u["e"],t)}}},o=a,l=(n("ca96"),n("2877")),c=Object(l["a"])(o,s,i,!1,null,"9e6c760a",null);e["default"]=c.exports},fa23:function(t,e,n){"use strict";n("7037")}}]);