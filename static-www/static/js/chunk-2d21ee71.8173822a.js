(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ee71"],{d818:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-collapse",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[n("el-collapse-item",{attrs:{title:"授权人"}},[n("template",{slot:"title"},[n("AuthCodeAbout"),e._v(" "),e.$store.state.user.name?n("div",{staticStyle:{"margin-left":"1rem"}},[n("el-tooltip",[n("template",{slot:"content"},[e._v("当前默认授权人")]),e._v(" "),n("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.$store.state.user.name))])],2)],1):n("span",{staticStyle:{color:"#ff8f8f"}},[e._v("未登录,请使用授权码")])],1),e._v(" "),n("el-form",[n("el-form-item",{attrs:{label:"授权人"}},[n("UserSelector",{attrs:{code:e.innerForm.authByUserId,"default-info":e.defaultUser,"select-name":e.selectName},on:{"update:code":function(t){return e.$set(e.innerForm,"authByUserId",t)}}})],1),e._v(" "),n("el-form-item",{attrs:{label:"授权码"}},[n("CodeInput",{attrs:{"listen-user-input":e.collaspseIsOpen,"check-code-method":e.checkCode,code:e.innerForm.code},on:{"update:listenUserInput":function(t){e.collaspseIsOpen=t},"update:listen-user-input":function(t){e.collaspseIsOpen=t},"update:code":function(t){return e.$set(e.innerForm,"code",t)}}})],1)],1)],2)],1)},o=[],s=(n("7f7f"),n("5723")),u={name:"AuthCode",components:{CodeInput:function(){return n.e("chunk-f17136de").then(n.bind(null,"d2c5"))},AuthCodeAbout:function(){return n.e("chunk-c4f45ba6").then(n.bind(null,"3ead"))},UserSelector:function(){return n.e("chunk-0d10889b").then(n.bind(null,"2cfb"))}},model:{prop:"data",event:"change"},props:{data:{type:Object,default:null},authCheckMethod:{type:Function,default:s["c"]},selectName:{type:String,default:null}},data:function(){return{collaspseIsOpen:!1,innerForm:{authByUserId:null,code:null},defaultUser:null}},computed:{currentUser:function(){return this.$store.state.user.userid}},watch:{currentUser:{handler:function(e){this.innerForm.authByUserId=e,this.defaultUser="".concat(this.$store.state.user.name,"(").concat(e,")")},immediate:!0},innerForm:{handler:function(e){""===e.code&&(e.code=null),e.authByUserId?this.updateForm(e):e.authByUserId=null},deep:!0,immediate:!0}},methods:{updateForm:function(e){this.$emit("update:form",e),this.$emit("change",e)},checkCode:function(){var e=this;return new Promise((function(t,n){if(!e.innerForm.authByUserId)return e.$message.error("请输入id"),n("id未输入");var r=e.authCheckMethod;r(e.innerForm.authByUserId,e.innerForm.code).then((function(){e.$emit("update:status",!0),t()})).catch((function(t){e.$emit("update:status",!1),n(t)}))}))}}},a=u,l=n("2877"),c=Object(l["a"])(a,r,o,!1,null,null,null);t["default"]=c.exports}}]);