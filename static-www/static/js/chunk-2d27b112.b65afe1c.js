(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d27b112"],{"386d":function(n,t,e){"use strict";var r=e("cb7c"),o=e("83a1"),i=e("5f1b");e("214f")("search",1,(function(n,t,e,a){return[function(e){var r=n(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,r):new RegExp(e)[t](String(r))},function(n){var t=a(e,n,this);if(t.done)return t.value;var c=r(n),u=String(this),s=c.lastIndex;o(s,0)||(c.lastIndex=0);var l=i(c,u);return o(c.lastIndex,s)||(c.lastIndex=s),null===l?-1:l.index}]}))},"70eb":function(n,t,e){"use strict";e.d(t,"a",(function(){return s}));e("6c7b"),e("55dd"),e("a481");var r=e("2d36"),o=e("4360");function i(n){var t=n.items,e=n.predict,r=n.reason,o=n.filter_record,i=t.length;t=e(t);var a=t.length,c=i-a;return 0===c||(o[r]=c),t}function a(n,t){var e=t.problem_range_start,a=t.problem_range_end,s=t.shuffle_problem,l=t.shuffle_problem_options,f=t.new_problem,d=t.combo_problem,p=t.problem_max_num;e=e||1,a=a||n.length,s=s||!1,l=l||!1,f=f||!1,d=d||0,p=p||0;var b=o["a"].state.problems.current_problems,m={},h=n;return h=i({items:h,predict:function(n){return n.filter((function(n){return n}))},reason:"重复的题目",filter_record:m}),h=i({items:h,predict:function(n){return n.slice(e-1,a||n.length)},reason:"筛选题目范围",filter_record:m}),s&&(h=Object(r["b"])(h)),u(h,l),c(h),d&&(h=i({items:h,predict:function(n){return n.filter((function(n){return(b[n.id]&&b[n.id].combo_kill||0)<d}))},reason:"筛选连对",filter_record:m})),f&&(h=i({items:h,predict:function(n){return n.filter(n.filter((function(n){return!(b[n.id]&&b[n.id].total)})))},reason:"筛选新题",filter_record:m})),p>0&&(h=i({items:h,predict:function(n){return n.slice(0,p)},reason:"筛选最大刷题数",filter_record:m})),{items:h,filter_record:m}}function c(n){n.map((function(n){if(n.options){var t=n.analysis;t?n.option_map&&(n.option_map.map((function(n,e){t=t.replace("{{OPT:".concat(n+1,"}}"),"[".concat(e+1,"]"))})),n.analysis=t):n.analysis="暂无题解"}}))}function u(n,t){var e=function(n,t,e){var r=t.map((function(e,r){var o=n[r];return t[o]})),o={};n.map((function(n,t){o[n]=t}));var i=function(n){return o[n-1]+1},a=e.length?e.map(i).sort((function(n,t){return n-t})):i(e);return[r,a]};n.map((function(n){if(n.options){var o=n.options,i=n.answer,a=n.analysis,c=function(n){return n&&n>0&&n<=o.length};i&&i.length?(i=i.filter(c),i.length||(i=[1],a="(该题答案存在问题)".concat(a))):c(i)||(i=1,a="(该题答案存在问题)".concat(a));var u=new Array(o.length).fill(0).map((function(n,t){return t}));if(t){console.log("start shuffle options"),u=Object(r["b"])(u);var s=e(u,o,i,a);n.options=s[0],n.answer=s[1]}n.option_map=u}}))}function s(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n;return new Promise((function(n,r){var o={};e=e.map((function(n){var t=Object.assign({},n);return t.id||(t.id="".concat(n.content).concat(JSON.stringify(n.answer))),o[t.id]?(o[t.id]++,null):(o[t.id]=1,t.completed=null,t)}));var i=e.length,c=a(e,t),u=c.items,s=c.filter_record;return e=u.map((function(n,t){return Object.assign({page_index:t},n)})),n({problems:e,duplicated:o,total_count:i,filter_record:s})}))}},"83a1":function(n,t){n.exports=Object.is||function(n,t){return n===t?0!==n||1/n===1/t:n!=n&&t!=t}},9554:function(n,t,e){"use strict";e.d(t,"b",(function(){return o})),e.d(t,"a",(function(){return i})),e.d(t,"c",(function(){return a}));e("ac6a"),e("456d"),e("28a5");function r(n,t,e){t||(t="name"),n[t]||(n[t]=[]),n[t].push(e)}function o(n){if(!n)return{};var t=n.content;if(!t)return{};var e=t.split(" "),o={};return e.map((function(n){if(n){var t=n.indexOf(":");if(-1===t)return r(o,"name",n);var e=n.substring(0,t),i=n.substring(t+1);return r(o,e,i)}})),Object.keys(n).filter((function(n){return"content"!==n})).map((function(t){n[t]=null})),Object.keys(o).map((function(t){n[t]=o[t].join(";")})),o}function i(n){return Object.keys(n).filter((function(t){return"content"!==t&&n[t]})).map((function(t){return{k:t,v:n[t].split(";")}}))}function a(n){if(!n)return{};var t=i(n).map((function(n){return"name"===n.k?n.v.join(";"):"".concat(n.k,":").concat(n.v.join(";"))})).join(" ");return n.content=t,t}},e2dd:function(n,t,e){"use strict";e.d(t,"a",(function(){return i})),e.d(t,"c",(function(){return a})),e.d(t,"b",(function(){return c}));var r=e("589d"),o=e.n(r);function i(n){n.style.opacity=0,n.style["margin-left"]="5rem"}function a(n,t){var e=150*(n.dataset.index||0);setTimeout((function(){o()(n,{"margin-left":"",opacity:1},{complete:t})}),e)}function c(n,t){return this.beforeEnter(n)}},eff1:function(n,t,e){"use strict";e.r(t);var r=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("SearchOptions",{on:{onSearch:n.onSearch},model:{value:n.search,callback:function(t){n.search=t},expression:"search"}}),n._v(" "),e("el-dialog",{attrs:{visible:n.show_result,width:"mobile"===n.device?"100%":"50%","append-to-body":""},on:{"update:visible":function(t){n.show_result=t}},scopedSlots:n._u([{key:"title",fn:function(){return[e("h3",[n._v("题库:"+n._s(n.database_data.alias)+"(共"+n._s(n.total_data_count)+"题)")])]},proxy:!0}])},[n._v(" "),e("SearchOptions",{attrs:{advance:!0},on:{onSearch:n.onSearch},model:{value:n.search,callback:function(t){n.search=t},expression:"search"}}),n._v(" "),e("transition-group",{staticClass:"slide-container",attrs:{name:"slide-fade",mode:"out-in",tag:"ul"},on:{enter:n.enter,"before-enter":n.beforeEnter,"before-leave":n.beforeLeave}},n._l(n.filtered_paged_problems,(function(n,t){return e("li",{key:n.id,staticClass:"slide-fade-item",attrs:{"data-index":t}},[e("Problem",{key:n.id,attrs:{show:!0,data:n,"only-read":!0}})],1)})),0),n._v(" "),e("Pagination",{attrs:{pagesetting:n.page,"total-count":n.filtered_problems.length},on:{"update:pagesetting":function(t){n.page=t}}})],1)],1)},o=[],i=(e("8e6e"),e("ac6a"),e("456d"),e("7514"),e("7f7f"),e("386d"),e("ade3")),a=e("9554"),c=e("e2dd"),u=e("2f62"),s=e("70eb"),l=e("05f3");function f(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function d(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?f(Object(e),!0).forEach((function(t){Object(i["a"])(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):f(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var p={name:"ProblemSearch",components:{Problem:function(){return e.e("chunk-399b4592").then(e.bind(null,"e39d"))},Pagination:function(){return e.e("chunk-2d0b95e7").then(e.bind(null,"333d"))},SearchOptions:function(){return e.e("chunk-2d208714").then(e.bind(null,"a58b"))}},props:{name:{type:String,default:null}},data:function(){return{loading:!1,search:{content:null,name:null,answer:null,option:null,count_wrong:0,count_right:0,count_total:0},database_data:{},problems:[],show_result:!1,page:{pageIndex:0,pageSize:5},total_data_count:0}},computed:d({filtered_paged_problems:function(){var n=this.page,t=this.filtered_problems,e=n.pageIndex*n.pageSize,r=e+n.pageSize;return t.slice(e,r)},filtered_problems:function(){var n=this.problems;if(!n)return[];var t=Object(a["a"])(this.search),e=t.reduce((function(n,t){return(n[t.k]=t.v)&&n}),{}),r=e.name,o=e.answer,i=e.option,c=e.count_wrong,u=e.count_right,s=e.count_total;return console.log({name:r,answer:o,option:i,count_wrong:c,count_right:u,count_total:s}),r&&r.map((function(t){n=n.filter((function(n){return n.content.indexOf(t)>-1}))})),o&&o.map((function(t){n=n.filter((function(n){var e=n.answer;return!!e&&(e.push?e.find((function(n){return"".concat(n).indexOf(t)>-1})):"".concat(e).indexOf(t)>-1)}))})),i&&i.map((function(t){n=n.filter((function(n){var e=n.option;return!!e&&e.find((function(n){return n.indexOf(t)>-1}))}))})),n}},Object(u["c"])({device:function(n){return n.app.device}})),watch:{name:{handler:function(){this.refresh()},immediate:!0}},methods:{beforeLeave:c["b"],enter:c["c"],beforeEnter:c["a"],onSearch:function(){this.show_result=!0},refresh:function(){var n=this,t=this.name;t&&(this.loading=!0,l["a"].get_database_detail(t).then((function(t){n.database_data=t,Object(s["a"])(t.problems).then((function(t){var e=t.problems,r=(t.duplicated,t.total_count);t.filter_record;n.problems=e,n.total_data_count=r}))})).finally((function(){n.loading=!1})))}}},b=p,m=e("2877"),h=Object(m["a"])(b,r,o,!1,null,"e7b29234",null);t["default"]=h.exports}}]);